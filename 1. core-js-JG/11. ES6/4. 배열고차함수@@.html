<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  <script>
    const userList = [{
        account: "abc1234",
        userName: "대길이",
        job: "추노",
        address: "서울",
        hobbies: ["수영", "축구", "테니스"],
      },
      {
        account: "banana",
        userName: "빠나나",
        job: "과일",
        address: "서울",
        hobbies: ["푸드파이팅", "테니스"],
      },
      {
        account: "park1234",
        userName: "주차왕",
        job: "발렛파킹",
        address: "경기",
        hobbies: ["족구", "축구", "테니스", "영화감상"],
      },
      {
        account: "fire",
        userName: "불꽃남자카리스마",
        job: "게이머",
        address: "서울",
        hobbies: ["독서", "테니스"],
      },
    ];

    // 배열 고차함수
    // forEach() : 배열의 요소를 반복하면서 하나씩 소비
    // 先 배열 지목, 단독 호출
    userList.forEach(user => { //중괄호 생략 가능
      console.log(`제 이름은 ${user.userName}이구요 ~${user.address}에 살아요`);
    }) // 콜백받음

    const foodList = ['자장면', '탕수육', '치킨'];
    foodList.forEach(food => console.log(`${food} 맛있어요.`));
    // 각 객체 -> food에 들어옴


    console.log('---------------------------');

    // filter
    // 특정 조건에 의해 필터링 된새로운 배열이 리턴
    const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
    const newArray = numbers.filter(num => /*조건식 : */ num % 3 === 0); //num은 어디서? 왜 바꾸면 안됨?
    console.log(newArray);


    // 회원 중 아이디가 abcd1234인 사람을 필터링
    const newUserList = userList.filter(user => user.account === 'abc1234');
    console.log(newUserList);

    console.log('-----------------------------------');
    // 배열 고차함수 : map
    // 특정 배열에서 특정 조건에 맞는 값들만 따로 모아서
    // 새롭게 매핑한 배열을 반환.

    const square = numbers.map(n => n ** 2); // 숫자 들어올 때 마다 2승
    console.log(square);

    const plusTwo = numbers.map(n => n + 2); // map함수
    console.log(plusTwo);

    // 회원들의 취미 중 첫번째 취미만 새 배열로 받기
    const firstHobby = userList.map(user => user.hobbies[0]) //user 선언.hobbies[0]
    console.log(firstHobby);

    // 회원 목록에서 회원의 이름과 주소만 추출하고 싶다.
    const mappedUserList = userList.map(u => { //x로 적어도 됨
      return {
        userName: u.userName,
        addr: u.address //여러개의 값 리턴 -> 배열, 객체
      }
    });

    console.log(mappedUserList);

    // filter -> 10개짜리 배열에서 조건에맞는 몇개만 필터링
    // 필터의 결과 배열은 개수가 10개 이하일 가능성이 크다.


    // map -> 10개짜리 배열에서 조건대로 10개를 전부 매핑
    // 맵의 결과 배열 개수는 무조건 10개다.
    // 일괄 처리 느낌

    console.log('-----------------------------------');

    const appleBasket = [{
        color: 'green',
        sweet: 13
      },
      {
        color: 'red',
        sweet: 14
      },
      {
        color: 'red',
        sweet: 11
      },
      {
        color: 'green',
        sweet: 6
      },
      {
        color: 'green',
        sweet: 7
      },
      {
        color: 'green',
        sweet: 9
      },
    ];

    // 사과중에 녹색이면서 당도가 9 이상인 사과만 선별해서
    // 이 사과는 xxx색이며, 당도는 xxx입니다.
    // 라는 문자열이 매핑되어 있는 배열을 리턴해 주세요.

    /* 더 간단하게 가능
    const fillterdApples = appleBasket.filter(apple => apple.color === 'green' && apple.sweet >= 9)
    console.log(fillterdApples);

    const mappedApples = fillterdApples.map(apple => `이 사과는 ${apple.color}색이며, 당도는 ${apple.sweet}입니다.`);
    
    mappedApples.forEach(apple => console.log(apple));
    */




    //appleBasket.filter() 같음 길어져서
    appleBasket
      .filter(apple => apple.color === 'green' && apple.sweet >= 9) // 함수의 호출 행위 자체가 return ex: fillterdApples
      .map(apple => `이 사과는 ${apple.color}색이며, 당도는 ${apple.sweet}입니다.`) // 메서드 체인링 이어 붙임
      .forEach(a => console.log(a)); //메서드 체인링 이어 받기 @@ 변수 이름 상관 없음?
    
    
    

    console.log('-----------------------------------');
    // 회원목록에서 서울에 사는 회원들의
    // 두번째 취미만 배열에 모아서
    // xxx회원님의 2번째 취미는 xxx입니다. 를 반복해서 출력
    
    
    /* 내가 작성
    userList
    .filter(user => user.address === '서울')
    .map(user => user.hobbies > 2)
    .forEach( b => console.log(b));
    */
    
    userList
      .filter(user => user.address === '서울')
      .map(user => {
        return { // return 객체
          name : user.userName,
          secondHobby : user.hobbies[1]
        }
      })
      .forEach(u => console.log(`${u.name}회원님의 2번째 취미는 ${u.secondHobby}입니다`));

  </script>


</body>

</html>